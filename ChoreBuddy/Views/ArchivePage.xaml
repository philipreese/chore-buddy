<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:views="clr-namespace:ChoreBuddy.Views"
             xmlns:vm="clr-namespace:ChoreBuddy.ViewModels"
             xmlns:models="clr-namespace:ChoreBuddy.Models"
             x:Class="ChoreBuddy.Views.ArchivePage"
             x:DataType="vm:ArchiveViewModel"
             x:Name="ThisPage"
             Title="Archived Chores">
    
    <Grid RowDefinitions="Auto, *"
          Margin="10">
        <Label Grid.Row="1" 
               Text="Completion History"
               FontSize="Large"
               FontAttributes="Bold"
               Margin="0,10,0,10"/>
        <CollectionView Grid.Row="2"
                        x:Name="ChoreList"
                        ItemsSource="{Binding ArchivedChores}"  
                        RemainingItemsThreshold="5"
                        SelectionMode="None">

            <CollectionView.EmptyView>
                <Label Text="No archived chores!"
                       Margin="20"
                       HorizontalOptions="Center"
                       VerticalOptions="Center"
                       TextColor="{StaticResource Gray300}"/>
            </CollectionView.EmptyView>

            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="models:Chore">
                    <SwipeView>
                        <SwipeView.RightItems>
                            <SwipeItems Mode="Reveal">
                                <SwipeItemView BackgroundColor="{StaticResource Primary}"
                                               Command="{Binding x:DataType='views:ArchivePage', Source={x:Reference ThisPage}, Path=ViewModel.UnarchiveChoreCommand}"
                                               CommandParameter="{Binding .}">
                                    <Label FontFamily="FontAwesome"
                                           FontSize="28"
                                           Text="&#xf07c;"
                                           Padding="25,0"
                                           VerticalOptions="Center"
                                           HorizontalOptions="Center"
                                           TextColor="{StaticResource White}"/>
                                </SwipeItemView>
                            </SwipeItems>
                        </SwipeView.RightItems>
                        <Border Padding="15"
                                Margin="0, 5"
                                Background="{AppThemeBinding Light=White, Dark={StaticResource Gray600}}"
                                StrokeShape="RoundRectangle 10">
                            <Label Text="{Binding Name}"
                                FontSize="Large"
                                FontAttributes="Bold"/>
                        </Border>
                    </SwipeView>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </Grid>
</ContentPage>